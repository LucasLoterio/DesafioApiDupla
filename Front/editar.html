<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <title>Document</title>
</head>
<body style="background-color: rgb(199, 61, 61);">
    <div class="row justify-content-center align-items-center text-center">
        <div class="col-md-4">
            <label for="edit" class="control-label" >Digite a nova descrição da categoria</label>
            <input type="text" class="form-control rounded-pill" id ="edit" placeholder="Digite Categoria">
        </div>
        </div>
        <div class="text-center"> <button class="btn btn-outline-primary" onclick="editar()">Editar</button></div>
    
</body>
<script>
    let token = localStorage.getItem('token')
    const params = new URLSearchParams(window.location.search)
    let idcategoria = params.get('id')
    async function editar()
    {
        let aux = document.getElementById("edit").value
        let obj = 
        {
            id: idcategoria,
            nome: aux
        }
        if(aux != "")
        {
            await fetch(`https://localhost:7241/api/Categorias/${idcategoria}`,
            {
                method: "PUT",
                headers: {'Authorization': 'Bearer ' + token,'Content-Type' : 'application/json'},
                body: JSON.stringify(obj)
            })
        }
        window.location.href = "./listarcategorias.html"
    }
</script>
</html>